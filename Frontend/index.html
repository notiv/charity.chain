<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HackZurich2017</title>

    <!-- Jquery -->
    <script src="jquery-3.2.1.min.js"></script>

    <!-- Bootstrap -->
    <script src="bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="index.css">
</head>
<body>
    <div class="container border-top border-bottom">
        <div class="row">
            <div class="col-md-5 padding-top" style="height: 100%;">
                <!-- MAP -->
                <div class="globe centered">

                </div>
            </div>
            <div class="col-md-4" style="height: 100%;">
                <div class="row padding-top" style="height: 50%;">
                    <!-- FORM -->
                    <div class="form centered">
                        <h4>DONATE</h4>
                        <form>
                            <input type="text" value="100 $">
                            <select class="charities">
                                <!-- INITIALLY EMPTY -->
                            </select>
                            <button onClick="sendMoney()">DONATE</button>
                        </form>
                    </div>
                </div>
                <div class="row padding-top border-top" style="height: 50%;">
                    <!-- NEWS FOR CHARITY -->
                    <div class="news centered">
                        <!-- TODO -->NEWS
                    </div>
                </div>
            </div>
            <div class="col-md-3" style="height: 100%;">
                <div class="row padding-top" style="height: 70%;">
                    <!-- CAUSES -->
                    <div class="causes centered">
                        <!-- TODO -->CAUSES
                    </div>
                </div>
                <div class="row padding-top border-top" style="height: 30%;">
                    <!-- TRANSACTION LIST -->
                    <div class="transaction centered">
                        <!-- TODO -->TRANSACTION LIST
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- socket.io -->
    <script src="socket.io.slim.js"></script>
    <!-- app logic -->
    <script>
        /*
         * Socket.io
         */
        const urlPart = '40ccdca6';
        // connect to socket.io WS
        // TODO: replace with localhost before delivery
        const socket = io('http://' + urlPart + '.ngrok.io:8080');

        // listen for events
        socket.on('test event', data => {
            console.log(data);
        });

        socket.on('pendingTransaction', data => {
           console.log(data);
        });

        /*
         * UTILITY
         */
        const mapNameToAddress = () => {
            // TODO
        };

        /*
         * DOM events
         */

        const sendMoney = () => {
            const charity = $('.charities').find('option:selected').text();
            const charityAddress = mapNameToAddress();
        };

        /*
        * init data
        */
    </script>

    <!-- livereload -->
    <script>
        // server: livereloadx
        document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
        + ':35729/livereload.js?snipver=1"></' + 'script>')
    </script>
</body>
</html>